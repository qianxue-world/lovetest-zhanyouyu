# 截图生成脚本使用说明

## 功能说明

这个脚本用于生成恋爱占有欲测试的结果页截图，用于展示和测试。

## 安全限制

⚠️ **重要安全措施**：
- 脚本只能在**本地环境**运行
- 自动检测网络环境，非本地环境将被阻止
- 测试模式只在 localhost 下有效

## 使用方法

### 1. 启动开发服务器

```bash
npm run dev
```

### 2. 在另一个终端运行截图脚本

```bash
npm run screenshot
```

## 生成内容

脚本会生成 **20张** 不同分数的测试结果截图：

- **极值测试**：
  - 0分（最小值）
  - 100分（最大值）

- **均匀分布**：
  - 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95分

- **分数分布**：
  - 0-20分：佛系恋爱
  - 21-40分：理性恋爱
  - 41-60分：甜蜜占有
  - 61-80分：强烈占有
  - 81-100分：极度占有

## 输出位置

截图保存在项目根目录的 `screenshots/` 文件夹中。

文件命名格式：`score_XXX_timestamp.png`
- 例如：`score_000_1234567890.png`（0分）
- 例如：`score_100_1234567890.png`（100分）

## 测试模式说明

### URL参数

测试模式支持以下URL参数（仅localhost有效）：

```
http://localhost:5173/?test=true&score=50
```

- `test=true`：启用测试模式
- `score=XX`：指定分数（0-100）

### 安全检查

1. **前端检查**（App.tsx）：
   - 检查 hostname 是否为 localhost/127.0.0.1
   - 非本地环境自动禁用测试模式

2. **脚本检查**（generate-screenshots.js）：
   - 检查网络接口是否包含本地回环地址
   - 非本地环境直接退出，不执行任何操作

## 注意事项

1. 确保开发服务器在 `http://localhost:5173` 运行
2. 截图过程中不要关闭浏览器
3. 生成过程大约需要 1-2 分钟
4. 截图为高清（2x deviceScaleFactor）
5. 每张截图包含完整页面内容

## 故障排除

### 开发服务器未运行
```
❌ 开发服务器未运行！
💡 请先运行: npm run dev
```
**解决方法**：先启动开发服务器

### 非本地环境
```
❌ 安全限制：此脚本只能在本地环境运行！
```
**解决方法**：只能在本地开发环境使用此功能

### 截图失败
- 检查网络连接
- 确认端口 5173 未被占用
- 查看浏览器控制台错误信息
